/*! Beetlejuice - v0.5.0 - 2013-12-11
* Copyright (c) 2013 Wonderful Co.; Licensed MIT */
!function(){if("undefined"==typeof window.BBB)var a=window.BBB={_settings:{},bind:function(a,b){return function(){return b.apply(a,Array.prototype.slice.call(arguments))}},Class:function(b,c,d){if(a.CLASSES||(a.CLASSES={}),a.CLASSES[b])return a.CLASSES[b];var e=c||function(){};return e.prototype=d,e.prototype.bind=function(b){a.bind(this,b)},a.create(b,e),a.CLASSES[b]=e,a.CLASSES[b]},copy:function(a,b,c){for(var d in b)(c||"undefined"==typeof a[d])&&(a[d]=b[d]);return a},create:function(a,b){var c=window.BBB;b=b?b:{};var d=a?a.split("."):[];for(i=0;i<d.length;i++){var e=d[i],f=c[e];f||(c[e]=b&&i+1==d.length?b:{}),c=c[e]}return c},destroy:function(a){for(var b in a)isNaN(parseInt(b))&&this.destroy(a[b]);console.log("hi"),a=null,delete a},extend:function(b,c){var d="string"==typeof b?a.create(b):b;a.copy(d,c)},log:function(){if(window.console&&window.console.log){var a=1==arguments.length?arguments:Array.prototype.slice.call(arguments);window.console.log(a)}},importSettings:function(b){for(var c in b)a._settings[c]=b[c]},run:function(a){a.apply&&a.apply(this)},settings:function(b){return a._settings[b]?a._settings[b]:!1},subclass:function(b,c,d,e){if(a.CLASSES[c])return a.CLASSES[c];a.CLASSES||(a.CLASSES={});var f=a.create(b);return a.copy(e,f.prototype),a.Class(c,d?d:function(){f.apply&&f.apply(this,arguments)},e)}}}(),BBB.extend("array",{forEach:function(a,b,c){if(a)if("[object Array]"!==Object.prototype.toString.apply(a)&&(a instanceof Function||"number"!=typeof a.length))for(var d in a)(c||a.hasOwnProperty(d))&&b(a[d],d,a);else if(a.forEach)a.forEach(b);else for(var e=0,f=a.length;f>e;e++)b(a[e],e,a)},hasKey:function(a,b){if("[object Array]"==typeof b){for(var c in b)if(c==a)return b[c];return!1}},inArray:function(a,b){for(var c=b.length;c--;)if(b[c]===a)return!0;return!1}}),BBB.extend("communicator",{catchCallbackFunction:function(){},settings:{},init:function(){},catchResponse:function(a){return"function"==typeof a?a():"function"==typeof BBB.communicator.catchCallbackFunction?throwback=BBB.communicator.catchCallbackFunction(a):void 0},setCatchCallbackFunction:function(a){BBB.communicator.catchCallbackFunction=a||BBB.communicator.catchCallbackFunction},sendPostMessage:function(a,b,c){a.postMessage(c,b)},throwResponse:function(a){return window.opener?"function"==typeof window.opener.BBB.communicator.catchResponse&&(a=window.opener.BBB.communicator.catchResponse(a)):window.parent&&"function"==typeof window.parent.BBB.communicator.catchResponse&&(a=window.parent.BBB.communicator.catchResponse(a)),"function"==typeof callback?callback(a):!0}}),BBB.extend("content",{append:function(a,b){if("string"==typeof b){var c=document.createElement("div");return c.innerHTML=b,a.appendChild(c)}return a.appendChild(b)},insertIframe:function(a,b){if(a||BBB.log("No parent was provided for the iframe."),window.attachEvent){var c="<iframe src='"+b.src+"' id='"+b.id+"' width='"+b.width+"' height='"+b.height+"'"+(b.className?" class='"+b.className+"'":"")+" style='border:0;overflow:hidden;"+(b.width?"width:"+b.width+"px;":"")+(b.height?"height:"+b.height+"px;":"")+"' scrolling='no' frameborder='0' allowtransparency='true'></iframe>";BBB.content.append(a,c)}else c=document.createElement("iframe"),c.id=b.id,b.className&&(c.className=b.className),b.height&&(c.style.height=b.height+"px"),b.width&&(c.style.width=b.width+"px"),c.scrolling="no",c.frameBorder=0,c.style.background="transparent",c.style.border="0",c.style.overflow="hidden",BBB.content.append(a,c),c.setAttribute("src",b.src)}}),BBB.extend("dom",{isReady:!1,addCssFile:function(){var a,b=document.head||document.getElementsByTagName("head")[0]||document.documentElement,c=document.createElement("link");c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),c.setAttribute("href",filename),b.appendChild(a)},addCssRules:function(a,b){BBB.dom._cssRules||(BBB.dom._cssRules={});var c=!0;if(BBB.array.forEach(b,function(a){a in BBB.dom._cssRules||(c=!1,BBB.dom._cssRules[a]=!0)}),!c)if("ie"!=BBB.dom.getBrowserType()){var d=document.createElement("style");d.type="text/css",d.textContent=a,document.getElementsByTagName("HEAD")[0].appendChild(d)}else try{document.createStyleSheet().cssText=a}catch(e){document.styleSheets[0]&&(document.styleSheets[0].cssText+=a)}},addClass:function(a,b){var c=a.className.split(" "),d=!1;BBB.array.forEach(c,function(a){a==b&&(d=!0)}),d||c.push(b),a.className=c.join(" ")},addJsFile:function(a){script=document.createElement("script"),script.async="async",script.src=a,script.onload=script.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(script.onload=script.onreadystatechange=null)},head.appendChild(script)},attachEvent:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent(b,c)},getBrowserType:function(){if(!BBB.dom._browserType)for(var a=window.navigator.userAgent.toLowerCase(),b=["msie","firefox","safari","gecko"],c=["ie","mozilla","safari","mozilla"],d=0;d<b.length;d++)if(a.indexOf(b[d])>=0){BBB.dom._browserType=c[d];break}return BBB.dom._browserType},getElementsByClassName:function(a,b,c){return getElementsByClassName=document.getElementsByClassName?function(a,b,c){c=c||document;for(var d,e=c.getElementsByClassName(a),f=b?new RegExp("\\b"+b+"\\b","i"):null,g=[],h=0,i=e.length;i>h;h+=1)d=e[h],(!f||f.test(d.nodeName))&&g.push(d);return g}:document.evaluate?function(a,b,c){b=b||"*",c=c||document;for(var d,e,f=a.split(" "),g="",h="http://www.w3.org/1999/xhtml",i=document.documentElement.namespaceURI===h?h:null,j=[],k=0,l=f.length;l>k;k+=1)g+="[contains(concat(' ', @class, ' '), ' "+f[k]+" ')]";try{d=document.evaluate(".//"+b+g,c,i,0,null)}catch(m){d=document.evaluate(".//"+b+g,c,null,0,null)}for(;e=d.iterateNext();)j.push(e);return j}:function(a,b,c){b=b||"*",c=c||document;for(var d,e,f=a.split(" "),g=[],h="*"===b&&c.all?c.all:c.getElementsByTagName(b),i=[],j=0,k=f.length;k>j;j+=1)g.push(new RegExp("(^|\\s)"+f[j]+"(\\s|$)"));for(var l=0,m=h.length;m>l;l+=1){d=h[l],e=!1;for(var n=0,o=g.length;o>n&&(e=g[n].test(d.className),e);n+=1);e&&i.push(d)}return i},getElementsByClassName(a,b,c)},getElementsByTagName:function(a,b){var b=b?b:document.body;if("string"==typeof a){var c=a.split(","),d=new Array;return BBB.array.forEach(c,function(a){var c=b.getElementsByTagName(a);for(i=0;i<c.length;i++)d.push(c[i])}),d}},hasClass:function(a,b){var c;return a&&a.className&&"string"==typeof b?(c=a.getAttribute("class"),c=" "+c+" ",c.indexOf(" "+b+" ")>-1):!1},hide:function(a,b){a.style.display="none",b&&b(a)},isVisible:function(a){return 0==a.offsetHeight||0==a.offsetWidth?!1:"hidden"==a.style.visibility||"none"==a.style.display?!1:!0},remove:function(a){BBB.dom.replace(a,null)},removeClass:function(a,b){var c=a.className.split(" ");BBB.array.forEach(c,function(a,d){a==b&&delete c[d]}),a.className=c.join(" ")},replace:function(a,b){if(a.parentNode){var c=a.parentNode.replaceChild(b,a);return c}},show:function(a,b){a.style.display="block",b&&b(a)}}),function(){function domIsReady(){BBB.dom.isReady=!0,BBB.events.fire("dom.ready"),BBB.events.clear("dom.ready")}return 1==BBB.dom.isReady||"complete"==document.readyState?(domIsReady(),void 0):(document.addEventListener?document.addEventListener("DOMContentLoaded",function(){domIsReady()},!1):document.attachEvent&&document.attachEvent("onreadystatechange",function(){domIsReady()}),"ie"==BBB.dom.getBrowserType()&&window===top&&(!function(){try{document.documentElement.doScroll("left")}catch(a){return setTimeout(arguments.callee,0),void 0}domIsReady()}(),saveOldOnload=window.onload,window.onload=function(){domIsReady(),saveOldOnload&&("string"==typeof saveOldOnload?eval(saveOldOnload):saveOldOnload())}),void 0)}(),BBB.extend("ui.elements",{_elements:[],parse:function(){var a=this;BBB.array.forEach(BBB.ui.elements.elementTypes,function(b){a._elements[b]=new Array;var c=BBB.dom.getElementsByClassName(b.publicName),d=BBB.create(b.className);for(console.log(b.className),i=0;i<c.length;i++){var e=new d(c[i]);e.setup(),a._elements[b].push(c[i])}})},parseNew:function(a){var b=BBB.dom.getElementsByClassName(a);if(0!=b.length){var c=this;BBB.array.forEach(BBB.ui.elements.elementTypes,function(d){if(d.publicName==a){var e=BBB.create(d.className);for(i=0;i<b.length;i++)if(!BBB.array.inArray(b[i],c._elements)){var f=new e(b[i]);f.setup(),c._elements[d].push(b[i])}}})}},elementTypes:[]}),BBB.Class("ui.element",function(a){this.dom=a},{getAttribute:function(a,b,c){var d=this.dom.getAttribute(a)||this.dom.getAttribute(a.replace(/-/g,"_"))||this.dom.getAttribute(a.replace(/-/g,""));return d?c?c(d):d:b},setup:function(){return this.setupAndValidate()?void 0:(BBB.log("setup failed"),!1)},setupAndValidate:function(){return!0}}),BBB.extend("events",{clear:function(a){var b=BBB.events.subscriptions()[a];b&&BBB.array.forEach(b,function(a,c){b[c]=null})},fire:function(a,b){var c=BBB.events.subscriptions()[a];c&&BBB.array.forEach(c,function(a){"function"==typeof a&&a(b)})},subscriptions:function(){return BBB.events.subscribers||(BBB.events.subscribers=[]),BBB.events.subscribers},subscribe:function(a,b){var c=BBB.events.subscriptions();c[a]||(c[a]=[]),c[a].push(b)},unsubscribe:function(a,b){var c=BBB.events.subscriptions()[a];c&&BBB.array.forEach(c,function(a,d){a==b&&(c[d]=null)})}}),BBB.extend("qs",{decode:function(a){var b,c,d=decodeURIComponent,e={},f=a.split("&");for(b=0;b<f.length;b++)c=f[b].split("=",2),c&&c[0]&&(e[d(c[0])]=d(c[1]));return e},encode:function(a,b,c){b=void 0===b?"&":b,c=c===!1?function(a){return a}:encodeURIComponent;var d=[];return BBB.array.forEach(a,function(a,b){null!==a&&"undefined"!=typeof a&&d.push(c(b)+"="+c(a))}),d.sort(),d.join(b)}}),BBB.extend("util",{settings:{},init:function(){},currentUrl:function(){return window.location.href},guid:function(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},keyboard:{getKeycode:function(a){var b;if(!a)var a=window.event;return a.keyCode?b=a.keyCode:a.which&&(b=a.which),b}},parentIsLocal:function(){return window.location==window.parent.location},printPage:function(){window.print()},redirect:function(a){window.location=a},refreshPage:function(){window.location.reload()}}),BBB.run(function(){var a={elements:!0};a.elements&&BBB.ui.elements&&(BBB.dom.isReady?BBB.ui.elements.parse():BBB.events.subscribe("dom.ready",function(){BBB.ui.elements.parse()}))});